# ğŸ¤– AI ì±—ë´‡ ì•±
> OpenAIì˜ APIë¥¼ ì´ìš©í•˜ì—¬ ì¸ê³µì§€ëŠ¥ê³¼ ì±„íŒ…í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ 

<br/>

## ğŸŒ² ëª©ì°¨
- í”„ë¡œì íŠ¸ ì°¸ì—¬ì 
- í”„ë¡œì íŠ¸ ê¸°ê°„
- êµ¬í˜„ í™”ë©´
- ë””ë ‰í† ë¦¬ êµ¬ì¡°
- í•µì‹¬ êµ¬í˜„ì‚¬í•­
- íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<br/>

## ğŸ‘¨ğŸ»â€ğŸ’» í”„ë¡œì íŠ¸ ì°¸ì—¬ì

| í”„ë¡œí•„ ì‚¬ì§„ | <a href="https://github.com/comdori-wj"> <img src="https://avatars.githubusercontent.com/u/22284092?v=4" width="90" height="90"></a> | <a href="https://github.com/dpwns1234"><img src="https://avatars.githubusercontent.com/u/52391722?v=4" width=90></a> |
| ---- | --------- | --------- |
| in Github | [@Comdori](https://github.com/comdori-wj) | [@dpwns1234](https://github.com/dpwns1234) |
| in SeSAC | Comdori | ìš”í•œ |

<br/>

## ğŸ“† í”„ë¡œì íŠ¸ ê¸°ê°„
> 2024.01.02 ~ 2024.01.26 (4 weeks)

<br/>

## ğŸ“¸ êµ¬í˜„ í™”ë©´

|ì±„íŒ…ì°½, ëŒ€í™” ì—°ì†ì„± í…ŒìŠ¤íŠ¸|á„€á…µá†« á„ƒá…¢á„’á…ª á„‚á…¢á„‹á…­á†¼ á„†á…µá†¾ á„†á…¡á„Œá…µá„†á…¡á†¨ á„ƒá…¢á„’á…ª á„‚á…¢á„‹á…­á†¼ á„Œá…¡á„ƒá…©á†¼ á„‰á…³á„á…³á„…á…©á†¯|ì±„íŒ… ë™ì  ì…ë ¥ í…ŒìŠ¤íŠ¸|
|:---:|:---:|:---:|
![á„á…¢á„á…µá†¼á„á…¡á†¼, á„ƒá…¢á„’á…ª á„‹á…§á†«á„‰á…©á†¨á„‰á…¥á†¼](https://github.com/tasty-code/ios-chat-bot/assets/22284092/dd2e06cc-79a9-4625-91f1-959980d1719b)|![á„€á…µá†« á„ƒá…¢á„’á…ª á„‚á…¢á„‹á…­á†¼ á„†á…µá†¾ á„†á…¡á„Œá…µá„†á…¡á†¨ á„ƒá…¢á„’á…ª á„‚á…¢á„‹á…­á†¼ á„Œá…¡á„ƒá…©á†¼ á„‰á…³á„á…³á„…á…©á†¯](https://github.com/tasty-code/ios-chat-bot/assets/22284092/19284e7d-5e9e-494e-a4ab-0fbf6b97e3ce)|![á„á…¢á„á…µá†¼ á„ƒá…©á†¼á„Œá…¥á†¨ á„‹á…µá†¸á„…á…§á†¨ á„á…¦á„‰á…³á„á…³](https://github.com/tasty-code/ios-chat-bot/assets/22284092/a8d1da1d-2c00-40bc-875b-634c869fc196)|
|ì•„ì´í° í‚¤ë³´ë“œ í…ŒìŠ¤íŠ¸|ì‚¬ìš©ì ì˜¤ë¥˜ ì•Œë¦¼|
![á„‹á…¡á„‹á…µá„‘á…©á†« á„á…µá„‡á…©á„ƒá…³ á„á…¦á„‰á…³á„á…³](https://github.com/tasty-code/ios-chat-bot/assets/22284092/9288deae-a82e-4497-9fb6-057631697e49)|![á„‰á…¡á„‹á…­á†¼á„Œá…¡ á„‹á…©á„…á…² á„‹á…¡á†¯á„…á…µá†·](https://github.com/tasty-code/ios-chat-bot/assets/22284092/e18cfd91-fceb-4264-b45f-9c36600cea47)|

<br/> 


## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡° 

```
â”œâ”€â”€ ChatBot
â”‚Â Â  â”œâ”€â”€ ChatBot
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ APIKey.plist
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Assets.xcassets
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AccentColor.colorset
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Contents.json
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppIcon.appiconset
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Contents.json
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Contents.json
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Base.lproj
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ LaunchScreen.storyboard
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ChatAPI.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ChatViewController.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Extensions
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Bundle+Extension.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ UIStackView+Extension.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ UITextView+Extensions.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Info.plist
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Chat.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ChatRequestModel.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ChatResponseModel.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Errors.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Message.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Sender.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Network
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ NetworkManager.swift
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ New Group
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SceneDelegate.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ Views
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ BubbleView.swift
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ChatCollectionViewCell.swift
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ChatContentConfiguration.swift
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ChatContentView.swift
â”‚Â Â  â”‚Â Â      â””â”€â”€ DotsView.swift
â”‚Â Â  â””â”€â”€ ChatBot.xcodeproj
â”‚Â Â      â”œâ”€â”€ project.pbxproj
â”‚Â Â      â”œâ”€â”€ project.xcworkspace
â”‚Â Â      â”œâ”€â”€ xcshareddata
â”‚Â Â      â””â”€â”€ xcuserdata
â””â”€â”€ README.md
```

<br/>

## ğŸŒŸ í•µì‹¬ êµ¬í˜„ì‚¬í•­

### STEP1
- API ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ë°ì´í„° ëª¨ë¸ êµ¬í˜„
- [OpenAI API reference](https://platform.openai.com/docs/api-reference/chat) ë¬¸ì„œì˜ ë°ì´í„° í˜•ì‹ì„ ê³ ë ¤í•˜ì—¬ ëª¨ë¸ íƒ€ì…ì„ êµ¬í˜„

### STEP2
- async/awaitì™€ URL Sessionì„ í™œìš©í•œ ì„œë²„ì™€ì˜ í†µì‹ 

### STEP3
- Modern Collection View í™œìš©
    - CollectionViewì˜ Configure + Diffable DataSource ì‚¬ìš©í•˜ì—¬ êµ¬í˜„
- Core Graphicsì™€ Core Animationì˜ í™œìš© (ë§í’ì„  ë° ë¡œë”©ì¤‘ ë§í’ì„ )
- ëŒ€í™”ë¥¼ ëˆ„ë¥´ê±°ë‚˜, ìŠ¤í¬ë¡¤ í•  ë•Œ í‚¤ë³´ë“œê°€ ë‚´ë ¤ê°€ëŠ” ê¸°ëŠ¥ êµ¬í˜„ 
    - KeyboardLayoutGuideë¥¼ í™œìš©


<br/>

## ğŸš€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

#### 1. ì»¬ë ‰ì…˜ë·° ì…€ì˜ ì¬ì‚¬ìš©ì‹œ ë°œìƒí•˜ëŠ” ë§í’ì„  UIê°€ ê¹¨ì§€ëŠ” í˜„ìƒ
  
  - **ë¬¸ì œ í™”ë©´**
     - <a href="https://github.com/Dongjun-developer"><img src="https://hackmd.io/_uploads/r1XeTyb9p.png" width="300" height="700"></a>

  - **ë¬¸ì œ ì´ìœ **
    - ì»¬ë ‰ì…˜ ë·°ê°€ ì¬ì‚¬ìš©í•˜ë©´ì„œ ì œëŒ€ë¡œ ê·¸ë¦¬ì§€ ëª»í•¨.

  - **ë¬¸ì œ í•´ê²°**
    - ì…€ì´ ì¬ì‚¬ìš© ë  ë•Œë§ˆë‹¤(-> didSetìœ¼ë¡œ êµ¬í˜„) ë§í’ì„ ì„ ë‹¤ì‹œ ê·¸ë ¤ì£¼ë„ë¡ `setNeedsDisplay()`ë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ê²°í•¨. 

    ```swift 
    // ë¬¸ì œ í•´ê²° ì½”ë“œ
    final class BubbleView: UIView {
        var sender: Sender? {
            didSet {
                setNeedsDisplay()
            }
        }

        override func draw(_ rect: CGRect) {
            switch sender {
            case .assistant:
                makeAssistantBubble()
            case .user:
                makeUserBubble()
            case .loading:
                makeLoadingBubble()
            case .none:
                return
            }		
        }
    ...
    }
    ```

<br>

#### 2. cellì˜ constraintì˜ ì˜ëª» ì„¤ì •ìœ¼ë¡œ Warning ë°œìƒ

  - **Warning ë¡œê·¸**
    ```
    Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.
    The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful.
    2024-01-17 20:28:21.021208+0900 ChatBot[41812:799325] [LayoutConstraints] Unable to simultaneously satisfy constraints.
        Probably at least one of the constraints in the following list is one you don't want. 
        Try this: 
            (1) look at each constraint and try to figure out which you don't expect; 
            (2) find the code that added the unwanted constraint or constraints and fix it. 
    (
        "<NSLayoutConstraint:0x6000019cf520 ChatBot.BubbleView:0x14f6409f0.trailing == ChatBot.ChatContentView:0x14f640330.trailing   (active)>",
        "<NSLayoutConstraint:0x600001986df0 H:|-(0)-[ChatBot.BubbleView:0x14f6409f0]   (active, names: '|':ChatBot.ChatContentView:0x14f640330 )>",
        "<NSLayoutConstraint:0x6000019cb070 ChatBot.BubbleView:0x14f6409f0.width <= 300   (active)>",
        "<NSLayoutConstraint:0x600001986d00 'fittingSizeHTarget' ChatBot.ChatContentView:0x14f640330.width == 361   (active)>"
    )

    Will attempt to recover by breaking constraint 
    <NSLayoutConstraint:0x6000019cb070 ChatBot.BubbleView:0x14f6409f0.width <= 300   (active)>

    Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.
    The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful.
    ```

  - **ë¬¸ì œ ì´ìœ **
    - BubbleViewì˜ ì œì•½ì¡°ê±´ê³¼ BubbleViewì•ˆì˜ TextLabelì˜ ì œì•½ì¡°ê±´ì´ ì„œë¡œ ì¶©ëŒí•¨.

  - **ë¬¸ì œ í•´ê²°**
    - bubbleViewì˜ ì œì•½ì¡°ê±´ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ë‚®ì¶° ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ í•´ê²°í•¨.

    ``` swift 
    // ë¬¸ì œ í•´ê²° ì½”ë“œ
    final class ChatContentView: UIView, UIContentView {
        private func setConstraints() {
            userConstraints.forEach { constraint in
                constraint.priority = .defaultLow
            }
            assistantConstraints.forEach { constraint in
                constraint.priority = .defaultLow
            }
            loadingConstraints.forEach { constraint in
                constraint.priority = .defaultLow
            }
        }

        ...
    }
    ```
